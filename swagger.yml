openapi: 3.0.0
info:
  description: Deliverea API documentation
  version: '3.0'
  title: Deliverea API

servers:
  - url: https://api.deliverea.com
    description: Production environment
  - url: https://api.sandbox.deliverea.com
    description: Sandbox environment

paths:
  /v3/distribution-centers/{distributionCenterId}/advanced-tracking:
    post:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Configure Advanced Tracking
      requestBody:
        $ref: '#/components/requestBodies/AdvancedTrackingConfigurationRequest'
      responses:
        201:
          description: 'Created'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        409:
          $ref: '#/components/responses/SubdomainAlreadyTaken'
        500:
          $ref: '#/components/responses/UnexpectedError'

    put:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Configure Advanced Tracking
      requestBody:
        $ref: '#/components/requestBodies/AdvancedTrackingConfigurationRequest'
      responses:
        204:
          description: 'Updated'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        409:
          $ref: '#/components/responses/SubdomainAlreadyTaken'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Get Advanced Tracking configuration
      responses:
        200:
          $ref: '#/components/responses/AdvancedTrackingConfigurationResponse'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        404:
          $ref: '#/components/responses/NotFound'
        500:
          $ref: '#/components/responses/UnexpectedError'

  /v3/distribution-centers/{distributionCenterId}/advanced-tracking/logo:
    post:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                logo:
                  type: string
                  format: binary
      security:
        - basicAuth: []
      summary: Upload Advanced Tracking Logo
      responses:
        201:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'

  /v3/distribution-centers/{distributionCenterId}/advanced-tracking/activate:
    patch:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Activates Advanced Tracking
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/distribution-centers/{distributionCenterId}/advanced-tracking/deactivate:
    patch:
      tags:
        - AdvancedTracking
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Deactivates Advanced Tracking
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'


  /v3/billing-accounts:
    get:
      tags:
        - BillingAccounts
      security:
        - basicAuth: []
      summary: List billing accounts
      responses:
        200:
          $ref: '#/components/responses/ListBillingAccountResponse'
    post:
      tags:
        - BillingAccounts
      security:
        - basicAuth: []
      summary: Create a new billing account
      requestBody:
        $ref: '#/components/requestBodies/BillingAccountRequest'
      responses:
        201:
          description: "CREATED"
          headers:
            content-location:
              description: Uri for the new created object
              schema:
                type: string
              example: /v3/billing-accounts/49030f12-79e6-4e1f-9e3d-b3f6774d742b
            content-uuid:
              description: Uuid for the new created object
              schema:
                type: string
                format: uuid

  /v3/billing-accounts/{billingAccountId}:
    parameters:
      - in: path
        name: billingAccountId
        required: true
        schema:
          type: string
          format: uuid
    get:
      tags:
        - BillingAccounts
      security:
        - basicAuth: []
      summary: Retrieve a billing acount by it's id
      responses:
        200:
          $ref: '#/components/responses/BillingAccountResponse'
        404:
          description: Not found
    put:
      summary: Update a billing account
      description: Performs full update in given billing account
      tags:
        - BillingAccounts
      security:
        - basicAuth: []
      requestBody:
        $ref: '#/components/requestBodies/BillingAccountRequest'
      responses:
        204:
          description: Ok, billing account has been updated
        404:
          description: Not found

  /v3/billing-accounts/{billingAccountId}/activate:
    patch:
      tags:
        - BillingAccounts
      parameters:
        - in: path
          name: billingAccountId
          schema:
            type: string
          required: true
          description: Billing account unique uuid identifier
      security:
        - basicAuth: [ ]
      summary: Activate a billing account
      responses:
        200:
          description: Accepted
        404:
          description: Not found

  /v3/billing-accounts/{billingAccountId}/deactivate:
    patch:
      tags:
        - BillingAccounts
      parameters:
        - in: path
          name: billingAccountId
          schema:
            type: string
          required: true
          description: Billing account unique uuid identifier
      security:
        - basicAuth: [ ]
      summary: Deactivate a billing account
      responses:
        200:
          description: Accepted
        404:
          description: Not found
        409:
          description: Conflict, the billing account has distribution centers assigned


  /v3/carriers:
    get:
      tags:
        - Carriers and services
      security:
        - basicAuth: []
      summary: List available carriers and their methods
      responses:
        200:
          $ref: '#/components/responses/ListCarriersResponse'

  /v3/carriers/{carrierCode}/services:
    get:
      tags:
        - Carriers and services
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: 'Code identifier of the Carrier'
      summary: Get available services for a particular carrier
      responses:
        200:
          $ref: '#/components/responses/ListServicesResponse'
        404:
          $ref: '#/components/responses/NotFound'

  /v3/carriers/{carrierCode}/credential-fields:
    get:
      tags:
        - Carriers and services
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
      summary: Get credentials fields to be configured to use the carrier
      responses:
        200:
          description:  Credentials fields to be configured to use the carrier
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/credentialField'
        404:
          $ref: '#/components/responses/NotFound'


  ### Cost Centers ###
  /v3/distribution-centers/{distributionCenterId}/carriers/{carrierCode}/cost-centers:
    post:
      tags:
        - Cost Centers
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
      summary: Create a cost center
      requestBody:
        $ref: '#/components/requestBodies/CostCenterRequest'
      responses:
        201:
          description: Created
        409:
          description: Conflict
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'CF0002'
                      message:
                        type: string
                        description: 'A configuration already exists for the given carrier and cost center'
                        example: 'A configuration already exists for the given carrier and cost center'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'

    get:
      tags:
        - Cost Centers
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
      summary: List cost centers
      responses:
        200:
          $ref: '#/components/responses/ListCostCentersResponse'


  /v3/distribution-centers/{distributionCenterId}/carriers/{carrierCode}/cost-centers/{costCenter}:
    get:
      tags:
        - Cost Centers
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
        - in: path
          name: costCenter
          schema:
            type: string
          required: true
          description: Alias identifier of the cost center
      summary: Get a cost center
      responses:
        200:
          $ref: '#/components/responses/GetCostCenterResponse'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Cost Centers
      security:
        - basicAuth: []
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
        - in: path
          name: costCenter
          schema:
            type: string
          required: true
          description: Alias identifier of the cost center
      summary: Edit or activate/deactivate a cost center
      requestBody:
        $ref: '#/components/requestBodies/CostCenterRequest'
      responses:
        200:
          description: Accepted
        404:
          $ref: '#/components/responses/NotFound'

  /v3/distribution-centers/{distributionCenterId}/carriers/{carrierCode}/cost-centers/{costCenter}/services/{serviceCode}/activate:
    patch:
      tags:
        - Cost Centers
      security:
        - basicAuth: [ ]
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
        - in: path
          name: costCenter
          schema:
            type: string
          required: true
          description: Alias identifier of the cost center
        - in: path
          name: serviceCode
          schema:
            type: string
          required: true
          description: Alias identifier of the carrier's service
      summary: Ativate a service for a cost center
      responses:
        200:
          description: Accepted
        404:
          $ref: '#/components/responses/NotFound'

  /v3/distribution-centers/{distributionCenterId}/carriers/{carrierCode}/cost-centers/{costCenter}/services/{serviceCode}/deactivate:
    patch:
      tags:
        - Cost Centers
      security:
        - basicAuth: [ ]
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
          required: true
          description: Credentials to be configured to use the carrier
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
        - in: path
          name: costCenter
          schema:
            type: string
          required: true
          description: Alias identifier of the cost center
        - in: path
          name: serviceCode
          schema:
            type: string
          required: true
          description: Alias identifier of the carrier's service
      summary: Deactivates a service for a cost center
      responses:
        200:
          description: Accepted
        404:
          $ref: '#/components/responses/NotFound'

  /v3/distribution-centers:
    get:
      tags:
        - DistributionCenters
      security:
        - basicAuth: []
      summary: List distribution centers
      responses:
        200:
          $ref: '#/components/responses/ListDistributionCentersResponse'

    post:
      tags:
        - DistributionCenters
      security:
        - basicAuth: []
      summary: Create a distribution center
      requestBody:
        $ref: '#/components/requestBodies/DistributionCenterRequest'
      responses:
        201:
          description: Created
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'

  /v3/distribution-centers/{distributionCenterId}:
    get:
      tags:
        - DistributionCenters
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Get distribution center by id
      security:
        - basicAuth: []
      summary: Get a distribution center
      responses:
        200:
          $ref: '#/components/responses/GetDistributionCenterResponse'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - DistributionCenters
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
      security:
        - basicAuth: []
      summary: Edita a distribution center
      requestBody:
        $ref: '#/components/requestBodies/DistributionCenterRequest'
      responses:
        200:
          description: Updated
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/distribution-centers/{distributionCenterId}/activate:
    patch:
      tags:
        - DistributionCenters
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
      security:
        - basicAuth: []
      summary: Activate a distribution center
      responses:
        200:
          description: Accepted
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/distribution-centers/{distributionCenterId}/deactivate:
    patch:
      tags:
        - DistributionCenters
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: Distribution center unique uuid identifier
      security:
        - basicAuth: []
      summary: Deactivate a distribution center
      responses:
        200:
          description: Accepted
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/orders:
    post:
      tags:
        - Orders
      security:
        - basicAuth: []
      summary: Create an order (async flow)
      requestBody:
        $ref: '#/components/requestBodies/OrderRequest'
      responses:
        200:
          $ref: '#/components/responses/CreateOrderResponse'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        401:
          $ref: '#/components/responses/ApiUserOrKeyInvalid'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - Orders
      security:
        - basicAuth: []
      summary: Search orders by criteria
      parameters:
        - in: query
          name: carrierCode
          schema:
            type: string
          description: Carrier used when creating the shipment
          example: dummy
        - in: query
          name: serviceCode
          schema:
            type: string
          description: Service used when creating the shipment
          example: standard
        - in: query
          name: costCenterCode
          schema:
            type: string
          description: Alias identifier of the cost center
          example: DEFAULT
        - in: query
          name: clientReference
          schema:
            type: string
          description: Filter by exact clientReference
          example: REF0123456789
        - in: query
          name: delivereaReference
          description: Filter by exact delivereaReference
          schema:
            type: string
          example: D5312427d7f72b0
        - in: query
          name: parcelClientCode
          schema:
            type: string
          description: Filter by exact parcelClientCode
          example: 100597501
        - in: query
          name: dropPointKey
          schema:
            type: string
          description: Filter by drop point key
          example: DP123456789
        - in: query
          name: countryCode
          schema:
            type: string
          description: Destination country code for shipment expeditions or origin country code for return expedition
          example: ES
        - in: query
          name: fromShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: From shipping date starting at
        - in: query
          name: toShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: To shipping date ending at
        - in: query
          name: statuses[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/OrderStatus'
          description: Order statuses to filter
          example: ['draft','pending']
        - in: query
          name: distributionCenterIds[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Uuid'
          style: deepObject
          explode: true
          description: Uuids of the distribution centers to filter
          example: ['51453d83-8014-11ea-bae6-026b033c7ea0']
        - in: query
          name: fromCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date starting at
        - in: query
          name: toCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date ending at
        - in: query
          name: distributionCenterCountryCode
          schema:
            type: string
          description: Filter by distribution center's country
          example: ES
        - in: query
          name: billingAccountId
          schema:
            type: string
          description: Filter by billing account
          example: 7f601f2d-7654-4b1c-a41e-fa77ef21c9fb
        - in: query
          name: page
          schema:
            type: number
          example: 1
        - in: query
          name: itemsPerPage
          schema:
            type: number
          example: 50
      responses:
        200:
          $ref: '#/components/responses/SearchOrdersResponse'


  /v3/orders/{reference}:
    get:
      tags:
        - Orders
      parameters:
        - in: path
          name: reference
          schema:
            type: string
          required: true
          description: 'Order reference {delivereaReference|clientReference|carrierReference}. While delivereaReference is always unique and will have one match, if clientReference or carrierReference is used and there is more than one coincidence, the most recent match will be returned'
      security:
        - basicAuth: []
      summary: Get order by reference
      responses:
        200:
          $ref: '#/components/responses/GetOrderResponse'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        404:
          $ref: '#/components/responses/NotFound'
        500:
          $ref: '#/components/responses/UnexpectedError'


  /v3/orders/{delivereaReference}/{parcelClientCode}/{parcelNumber}/label:
    get:
      tags:
        - Orders
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
        - in: path
          name: parcelClientCode
          schema:
            type: string
          required: true
          description: Unique parcel identifier, provided by client and required for Label Engine flow
        - in: path
          name: parcelNumber
          schema:
            type: string
          required: true
          description: 'Parcel number out of the total of the the order, (ex: 1, 2, 3...)'
      security:
        - basicAuth: []
      summary: Generate parcel label with engine
      responses:
        200:
          $ref: '#/components/responses/LabelResponse'
        404:
          $ref: '#/components/responses/ParcelNotFound'
        409:
          $ref: '#/components/responses/LabelEngineDisabled'

  /v3/orders/{delivereaReference}/confirm:
    post:
      tags:
        - Orders
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Confirm order
      responses:
        202:
          description: Accepted
        404:
          $ref: '#/components/responses/NotFound'
        409:
          $ref: '#/components/responses/MissingLabel'

  /v3/orders/{delivereaReference}:
    put:
      tags:
        - Orders
      security:
        - basicAuth: []
      summary: Update an order
      description: "Edit the data of a previously created order. To be noted: \n
      - When the parcels array is modified (either by editing, adding or deleting a parcel) all previous parcels must be resent in the request, even if they are not being modified. This is because tht PUT operation overrides the whole parcels array. The same logic applies to the parcels.*.items arrays.\n
      - Distribution center and assignation (carrierCode, serviceCode and costCenterCode) parameters, either explicitly informed or implicitly calculated by the rules, can not be updated. In case these parameters need to be change, the order should be deleted and re-created."
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      requestBody:
        $ref: '#/components/requestBodies/UpdateOrderRequest'
      responses:
        204:
          description: Updated
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        401:
          $ref: '#/components/responses/ApiUserOrKeyInvalid'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'

    delete:
      tags:
        - Orders
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Delete an order
      responses:
        204:
          description: Canceled
        404:
          $ref: '#/components/responses/NotFound'


  ### SHIPMENTS ###
  /v3/shipments:
    post:
      tags:
        - Shipments
      security:
        - basicAuth: []
      summary: Create a shipment (sync flow)
      requestBody:
        $ref: '#/components/requestBodies/ShipmentRequest'
      responses:
        200:
          $ref: '#/components/responses/CreateShipmentResponse'
        401:
          $ref: '#/components/responses/ApiUserOrKeyInvalid'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFieldsOrCarrierDocumentationError'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - Shipments
      security:
        - basicAuth: []
      summary: Search shipments by criteria
      parameters:
        - in: query
          name: carrierCode
          schema:
            type: string
          description: Carrier used when creating the shipment
          example: dummy
        - in: query
          name: serviceCode
          schema:
            type: string
          description: Service used when creating the shipment
          example: standard
        - in: query
          name: costCenterCode
          schema:
            type: string
          description: Alias identifier of the cost center
          example: DEFAULT
        - in: query
          name: clientReference
          schema:
            type: string
          description: Filter by exact clientReference
          example: REF0123456789
        - in: query
          name: carrierReference
          description: Unique carrier reference
          schema:
            type: string
          example: CAR987654321
        - in: query
          name: delivereaReference
          description: Filter by exact delivereaReference
          schema:
            type: string
          example: D5312427d7f72b0
        - in: query
          name: parcelClientCode
          schema:
            type: string
          description: Filter by exact parcelClientCode
          example: 100597501
        - in: query
          name: toName
          schema:
            type: string
          description: Name of the recipient (like)
          example: 'John D'
        - in: query
          name: toZipCode
          schema:
            type: string
          description: Destination zip code
          example: 08005
        - in: query
          name: toCountryCode
          schema:
            type: string
          description: Destination country code
          example: ES
        - in: query
          name: dropPointKey
          schema:
            type: string
          description: Filter by drop point key
          example: DP123456789
        - in: query
          name: cashOnDelivery
          schema:
            type: number
            enum:
              [0,1]
          description: Wether or not the expedition includes cash on delivery (truthy/falsy type boolean)
          example: 1
        - in: query
          name: fromShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: From shipping date starting at
        - in: query
          name: toShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: To shipping date ending at
        - in: query
          name: statuses[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Status'
          description: Shipment statuses to filter
          example: ['active','finalized']
        - in: query
          name: currentTrackingCodes[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/TrackingCodes'
          description: Filter by tracking codes
          example: ['11']
        - in: query
          name: distributionCenterIds[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Uuid'
          style: deepObject
          explode: true
          description: Uuids of the distribution centers to filter
          example: ['51453d83-8014-11ea-bae6-026b033c7ea0']
        - in: query
          name: fromCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date starting at
        - in: query
          name: toCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date ending at
        - in: query
          name: distributionCenterCountryCode
          schema:
            type: string
          description: Filter by distribution center's country
          example: ES
        - in: query
          name: billingAccountId
          schema:
            type: string
          description: Filter by billing account
          example: 7f601f2d-7654-4b1c-a41e-fa77ef21c9fb
        - in: query
          name: page
          schema:
            type: number
          example: 1
        - in: query
          name: itemsPerPage
          schema:
            type: number
          example: 50
      responses:
        200:
          $ref: '#/components/responses/SearchShipmentsResponse'


  /v3/shipments/{reference}:
    get:
      tags:
        - Shipments
      parameters:
        - in: path
          name: reference
          schema:
            type: string
          required: true
          description: 'Shipment reference {delivereaReference|clientReference|carrierReference}. While delivereaReference is always unique and will have one match, if clientReference or carrierReference is used and there is more than one coincidence, the most recent match will be returned'
      security:
        - basicAuth: []
      summary: Get shipment by reference
      responses:
        200:
          $ref: '#/components/responses/GetShipmentResponse'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        404:
          $ref: '#/components/responses/NotFound'
        500:
          $ref: '#/components/responses/UnexpectedError'

  /v3/shipments/{delivereaReference}/label:
    get:
      tags:
        - Shipments
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Get shipment label
      responses:
        200:
          $ref: '#/components/responses/LabelResponse'
        404:
          $ref: '#/components/responses/NotFound'

  /v3/shipments/{delivereaReference}/trackings:
    get:
      tags:
        - Trackings
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Get shipment trackings
      responses:
        200:
          $ref: '#/components/responses/GetExpeditionTrackingsResponse'
        404:
          $ref: '#/components/responses/NotFound'

  /v3/shipments/{delivereaReference}/pod:
    get:
      tags:
        - Trackings
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Get shipment Proof of Delivery
      responses:
        200:
          $ref: '#/components/responses/GetExpeditionPodResponse'
        404:
          $ref: '#/components/responses/NotFound'
        409:
          $ref: '#/components/responses/ShipmentNotDelivered'

  /v3/shipments/{delivereaReference}:
    delete:
      tags:
        - Shipments
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Cancel shipment
      responses:
        204:
          description: Canceled
        404:
          $ref: '#/components/responses/NotFound'
        409:
          description: 'Shipment could not be cancelled'
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'CE0003'
                      message:
                        type: string
                        description: The expedition is not in a status that can be cancelled anymore
                        example: Expedition with reference XXXXXX is being deliverd and cann not be cancelled anymore

  /v3/shipments/manifests:
    post:
      tags:
        - Shipments
      parameters:
        - in: query
          name: carrierCode
          schema:
            type: string
          example: dummy
          description: Carrier the manifest will be generated for
        - in: query
          name: full
          description: If present and truthy, details of all the expedition will be inclueded (bigger file)
          schema:
            type: boolean
            default: false
          example: false
        - in: query
          name: distributionCenterId
          description: Distribution center the manifest will be generated for
          schema:
            type: string
          example: 51453d83-8014-11ea-bae6-026b033c7ea0
        - in: query
          name: fromCreatedAtDate
          schema:
            type: string
          example: '2022-05-22'
          description: Starting date the manifest will be generated from (format YYYY-MM-DD)
        - in: query
          name: toCreatedAtDate
          schema:
            type: string
          example: '2022-05-22'
          description: Ending date the manifest will be generated from (format YYYY-MM-DD)
      security:
        - basicAuth: [ ]
      summary: Generate shipments manifest for a day or date range
      responses:
        200:
          $ref: '#/components/responses/GenerateManifestResponse'
        404:
          $ref: '#/components/responses/NotFound'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'

  /v3/shipments/exports:
    post:
      tags:
        - Shipments
      security:
        - basicAuth: []
      summary: Export shipments data to file
      requestBody:
        description: 'Export request'
        content:
          application/json:
            schema:
              required:
                - destination
                - format
                - criteria
              properties:
                destination:
                  type: string
                  nullable: false
                  description: Email where the export will be sent
                  example: contact@email.com
                format:
                  type: string
                  enum: [xlsx, csv]
                  nullable: false
                  description: Format of the file exported
                  example: xlsx
                criteria:
                  type: object
                  properties:
                    carrierCode:
                      type: string
                      description: Carrier used when creating the shipment
                      example: dummy
                    serviceCode:
                      type: string
                      description: Service used when creating the shipment
                      example: standard
                    costCenterCode:
                      type: string
                      description: Alias identifier of the cost center
                      example: DEFAULT
                    clientReference:
                      type: string
                      description: Filter by exact clientReference
                      example: REF0123456789
                    carrierReference:
                      type: string
                      description: Filter by exact carrierReference
                      example: CAR987654321
                    delivereaReference:
                      type: string
                      description: Filter by exact delivereaReference
                      example: D5312427d7f72b0
                    parcelClientCode:
                      type: string
                      description: Filter by exact parcelClientCode
                      example: 100597501
                    toName:
                      type: string
                      description: Name of the recipient (like)
                      example: 'John D'
                    toZipCode:
                      type: string
                      description: Destination zip code
                      example: 08005
                    toCountryCode:
                      type: string
                      description: Destination country code
                      example: ES
                    dropPointKey:
                      type: string
                      description: Filter by drop point key
                      example: DP123456789
                    cashOnDelivery:
                      type: number
                      enum:
                        [0,1]
                      description: Wether or not the expedition includes cash on delivery (truthy/falsy type boolean)
                      example: 1
                    fromShippingDate:
                      allOf:
                        - $ref: '#/components/schemas/ShippingDate'
                        - description: From shipping date starting at
                    toShippingDate:
                      allOf:
                        - $ref: '#/components/schemas/ShippingDate'
                        - description: To shipping date ending at
                    statuses:
                      type: array
                      items:
                        $ref: '#/components/schemas/Status'
                      description: Shipment statuses to filter
                      example: ['active','finalized']
                    currentTrackingCodes:
                      type: array
                      items:
                        $ref: '#/components/schemas/TrackingCodes'
                      description: Filter by tracking codes
                      example: ['11']
                    distributionCenterIds:
                      type: array
                      items:
                        $ref: '#/components/schemas/Uuid'
                      description: Uuids of the distribution centers to filter
                      example: ['51453d83-8014-11ea-bae6-026b033c7ea0']
                    fromCreatedAtDate:
                      allOf:
                        - $ref: '#/components/schemas/CreatedAtDate'
                        - description: From created at date starting at
                    toCreatedAtDate:
                      allOf:
                        - $ref: '#/components/schemas/CreatedAtDate'
                        - description: From created at date ending at
                    distributionCenterCountryCode:
                      type: string
                      description: Filter by distribution center's country
                      example: ES
                    billingAccountId:
                      type: string
                      description: Filter by billing account
                      example: 7f601f2d-7654-4b1c-a41e-fa77ef21c9fb
      responses:
        202:
          description: Accepted
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'

  ### Returns ###
  /v3/returns:
    post:
      tags:
        - Returns
      security:
        - basicAuth: []
      summary: Create a return (sync flow)
      requestBody:
        $ref: '#/components/requestBodies/ReturnRequest'
      responses:
        200:
          $ref: '#/components/responses/CreateShipmentResponse'
        401:
          $ref: '#/components/responses/ApiUserOrKeyInvalid'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFieldsOrCarrierDocumentationError'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - Returns
      security:
        - basicAuth: []
      summary: Search returns by criteria
      parameters:
        - in: query
          name: carrierCode
          schema:
            type: string
          description: Carrier used when creating the shipment
          example: dummy
        - in: query
          name: serviceCode
          schema:
            type: string
          description: Service used when creating the shipment
          example: standard
        - in: query
          name: costCenterCode
          schema:
            type: string
          description: Alias identifier of the cost center
          example: DEFAULT
        - in: query
          name: clientReference
          schema:
            type: string
          description: Filter by exact clientReference
          example: REF0123456789
        - in: query
          name: carrierReference
          description: Unique carrier reference
          schema:
            type: string
          example: CAR987654321
        - in: query
          name: delivereaReference
          description: Filter by exact delivereaReference
          schema:
            type: string
          example: D5312427d7f72b0
        - in: query
          name: parcelClientCode
          schema:
            type: string
          description: Filter by exact parcelClientCode
          example: 100597501
        - in: query
          name: fromName
          schema:
            type: string
          description: Name of the recipient (like)
          example: 'John D'
        - in: query
          name: fromZipCode
          schema:
            type: string
          description: Destination zip code
          example: 08005
        - in: query
          name: fromCountryCode
          schema:
            type: string
          description: Destination country code
          example: ES
        - in: query
          name: fromShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: From shipping date starting at
        - in: query
          name: toShippingDate
          schema:
            $ref: '#/components/schemas/ShippingDate'
          description: To shipping date ending at
        - in: query
          name: statuses[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Status'
          description: Shipment statuses to filter
          example: ['active','finalized']
        - in: query
          name: currentTrackingCodes[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/TrackingCodes'
          description: Filter by tracking codes
          example: ['11']
        - in: query
          name: distributionCenterIds[]
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Uuid'
          style: deepObject
          explode: true
          description: Uuids of the distribution centers to filter
          example: ['51453d83-8014-11ea-bae6-026b033c7ea0']
        - in: query
          name: fromCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date starting at
        - in: query
          name: toCreatedAtDate
          schema:
            $ref: '#/components/schemas/CreatedAtDate'
          description: From created at date ending at
        - in: query
          name: distributionCenterCountryCode
          schema:
            type: string
          description: Filter by distribution center's country
          example: ES
        - in: query
          name: billingAccountId
          schema:
            type: string
          description: Filter by billing account
          example: 7f601f2d-7654-4b1c-a41e-fa77ef21c9fb
        - in: query
          name: page
          schema:
            type: number
          example: 1
        - in: query
          name: itemsPerPage
          schema:
            type: number
          example: 50
      responses:
        200:
          $ref: '#/components/responses/SearchShipmentsResponse'


  /v3/returns/{reference}:
    get:
      tags:
        - Returns
      parameters:
        - in: path
          name: reference
          schema:
            type: string
          required: true
          description: 'Return reference {delivereaReference|clientReference|carrierReference}. While delivereaReference is always unique and will have one match, if clientReference or carrierReference is used and there is more than one coincidence, the most recent match will be returned'
      security:
        - basicAuth: []
      summary: Get return by reference
      responses:
        200:
          $ref: '#/components/responses/GetReturnResponse'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        404:
          $ref: '#/components/responses/NotFound'
        500:
          $ref: '#/components/responses/UnexpectedError'


  /v3/returns/{delivereaReference}/label:
    get:
      tags:
        - Returns
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Get return label
      responses:
        200:
          $ref: '#/components/responses/LabelResponse'
        404:
          $ref: '#/components/responses/NotFound'

  /v3/returns/{delivereaReference}/trackings:
    get:
      tags:
        - Trackings
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Get return trackings
      responses:
        200:
          $ref: '#/components/responses/GetExpeditionTrackingsResponse'
        404:
          $ref: '#/components/responses/NotFound'

  /v3/returns/{delivereaReference}:
    delete:
      tags:
        - Returns
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Cancel return
      responses:
        204:
          description: Canceled
        404:
          $ref: '#/components/responses/NotFound'
        409:
          description: 'Shipment could not be cancelled'
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'CE0003'
                      message:
                        type: string
                        description: The expedition is not in a status that can be cancelled anymore
                        example: Expedition with reference XXXXXX is being deliverd and cann not be cancelled anymore

  /v3/returns/exports:
    post:
      tags:
        - Returns
      security:
        - basicAuth: []
      summary: Export returns data to file
      requestBody:
        description: 'Export request'
        content:
          application/json:
            schema:
              required:
                - destination
                - format
                - criteria
              properties:
                destination:
                  type: string
                  nullable: false
                  description: Email where the export will be sent
                  example: contact@email.com
                format:
                  type: string
                  enum: [xlsx, csv]
                  nullable: false
                  description: Format of the file exported
                  example: xlsx
                criteria:
                  type: object
                  properties:
                    carrierCode:
                      type: string
                      description: Carrier used when creating the shipment
                      example: dummy
                    serviceCode:
                      type: string
                      description: Service used when creating the shipment
                      example: standard
                    costCenterCode:
                      type: string
                      description: Alias identifier of the cost center
                      example: DEFAULT
                    clientReference:
                      type: string
                      description: Filter by exact clientReference
                      example: REF0123456789
                    carrierReference:
                      type: string
                      description: Filter by exact carrierReference
                      example: CAR987654321
                    delivereaReference:
                      type: string
                      description: Filter by exact delivereaReference
                      example: D5312427d7f72b0
                    parcelClientCode:
                      type: string
                      description: Filter by exact parcelClientCode
                      example: 100597501
                    fromName:
                      type: string
                      description: Name of the recipient (like)
                      example: 'John D'
                    fromZipCode:
                      type: string
                      description: Destination zip code
                      example: 08005
                    fromCountryCode:
                      type: string
                      description: Destination country code
                      example: ES
                    fromShippingDate:
                      allOf:
                        - $ref: '#/components/schemas/ShippingDate'
                        - description: From shipping date starting at
                    toShippingDate:
                      allOf:
                        - $ref: '#/components/schemas/ShippingDate'
                        - description: To shipping date ending at
                    statuses:
                      type: array
                      items:
                        $ref: '#/components/schemas/Status'
                      description: Shipment statuses to filter
                      example: ['active','finalized']
                    currentTrackingCodes:
                      type: array
                      items:
                        $ref: '#/components/schemas/TrackingCodes'
                      description: Filter by tracking codes
                      example: ['11']
                    distributionCenterIds:
                      type: array
                      items:
                        $ref: '#/components/schemas/Uuid'
                      description: Uuids of the distribution centers to filter
                      example: ['51453d83-8014-11ea-bae6-026b033c7ea0']
                    fromCreatedAtDate:
                      allOf:
                        - $ref: '#/components/schemas/CreatedAtDate'
                        - description: From created at date starting at
                    toCreatedAtDate:
                      allOf:
                        - $ref: '#/components/schemas/CreatedAtDate'
                        - description: From created at date ending at
                    distributionCenterCountryCode:
                      type: string
                      description: Filter by distribution center's country
                      example: ES
                    billingAccountId:
                      type: string
                      description: Filter by billing account
                      example: 7f601f2d-7654-4b1c-a41e-fa77ef21c9fb
      responses:
        202:
          description: Accepted
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'

  /v3/expeditions/{delivereaReference}/trackings:
    post:
      tags:
        - Trackings
      parameters:
        - in: path
          name: delivereaReference
          schema:
            type: string
          required: true
          description: 'Deliverea reference'
      security:
        - basicAuth: []
      summary: Add tracking info to a expedition
      requestBody:
        description: 'Add tracking request'
        content:
          application/json:
            schema:
              properties:
                carrierCode:
                  type: string
                  nullable: false
                  example: 'ownCarrier'
                code:
                  description: 'The status of the expedition in deliverea codes'
                  type: number
                  nullable: false
                  example: 11
                details:
                  type: string
                  example: "More info of tracking"
                  nullable: false
                date:
                  allOf:
                    - $ref: '#/components/schemas/Date'
                  nullable: false
                  description: 'The date when occurred the tracking event'
      responses:
        201:
          description: 'Tracking created'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        404:
          $ref: '#/components/responses/NotFound'

  ### Assignation match ###
  /v3/{expeditionType}/assignation:
    post:
      tags:
        - Assignation match
      parameters:
        - in: path
          name: expeditionType
          schema:
            type: string
            enum:
              - shipments
              - returns
          required: true
          description: 'Expedition type'
      security:
        - basicAuth: []
      summary: Match Rule
      requestBody:
        $ref: '#/components/requestBodies/OrderRequest'
      responses:
        200:
          description: carrier/costCenterCode/service assignation
          content:
            application/json:
              schema:
                properties:
                  carrierCode:
                    type: string
                    nullable: true
                    description: Carrier code. If rules are to be use this parameter should be set to 'auto'.
                    example: dummy
                  serviceCode:
                    type: string
                    nullable: true
                    description: Service code. If rules are to be use this parameter should be set to 'auto'.
                    example: standard
                  costCenterCode:
                    type: string
                    nullable: true
                    description: Alias identifier of the cost center
                    default: DEFAULT
        400:
          description: 'No matching rule found'
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'VE0400'
                      message:
                        type: string
                        description: No rules matched for this expedition
                        example: No rules matched for this expedition



  /v3/carriers/{carrierCode}/range:
    get:
      tags:
        - Label Engine
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
            example: dummy
          required: true
          description: Carrier of which the range is being configured
      security:
        - basicAuth: []
      summary: Get label range
      responses:
        200:
          description: Range status
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: object
                    properties:
                      startCode:
                        type: number
                        description: First number of the range configured
                        example: 1
                      endCode:
                        type: number
                        description: Last number of the range configurd
                        example: 9999999
                      availableCodes:
                        type: number
                        description: Codes still avaliable for use
                        example: 9900000
                      currentCode:
                        type: number
                        description: Next code that will be used
                        example: 10000
                      percentageUsed:
                        type: number
                        description: Percentage of codes used
                        example:  "0.09%"
        404:
          description: Missing or invalid field(s)
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'CF0004'
                      message:
                        type: string
                        description: Carrier range not found
                        example: "Label engine range could not retrieved for carrier dummy. Carrier range not found"

    put:
      tags:
        - Label Engine
      parameters:
        - in: path
          name: carrierCode
          schema:
            type: string
            example: dummy
          required: true
          description: Carrier of which the range is being configured
      security:
        - basicAuth: []
      summary: Configure label range
      requestBody:
        description: 'Range configuration request'
        content:
          application/json:
            schema:
              required:
                - startCode
                - endCode
              properties:
                startCode:
                  type: number
                  description: First number of the range configured
                  example: 1
                endCode:
                  type: number
                  description: Last number of the range configurd (must be bigger than startCode)
                  example: 9999999
      responses:
        200:
          description: Range configured correctly
        422:
          description: Missing or invalid field(s)
          content:
            application/json:
              schema:
                properties:
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: 'VE0900'
                      message:
                        type: string
                        description: Missing or invalid field(s)
                        example: "startCode: This value should not be blank."


  /v3/distribution-centers/{distributionCenterId}/returns-portal:
    post:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Configure Returns Web Portal
      requestBody:
        $ref: '#/components/requestBodies/ReturnsWebPortalConfigurationRequest'
      responses:
        201:
          description: 'Created'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        409:
          $ref: '#/components/responses/SubdomainAlreadyTaken'
        500:
          $ref: '#/components/responses/UnexpectedError'

    put:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Configure Returns Web Portal
      requestBody:
        $ref: '#/components/requestBodies/ReturnsWebPortalConfigurationRequest'
      responses:
        204:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        404:
          $ref: '#/components/responses/NotFound'
        409:
          $ref: '#/components/responses/SubdomainAlreadyTaken'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Get Returns Web Portal configuration
      responses:
        200:
          $ref: '#/components/responses/ReturnsWebPortalConfigurationResponse'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'

  /v3/distribution-centers/{distributionCenterId}/returns-portal/logo:
    post:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                logo:
                  type: string
                  format: binary
      security:
        - basicAuth: [ ]
      summary: Upload Returns Web Portal Logo
      responses:
        201:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'

  /v3/distribution-centers/{distributionCenterId}/returns-portal/activate:
    patch:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Activates Returns Web Portal
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/distribution-centers/{distributionCenterId}/returns-portal/deactivate:
    patch:
      tags:
        - ReturnsWebPortal
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: [ ]
      summary: Deactivates Returns Web Portal
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/rules:
    post:
      tags:
        - Rules
      security:
        - basicAuth: []
      summary: Create a new rule
      requestBody:
        $ref: '#/components/requestBodies/RulesConfigurationRequest'
      responses:
        201:
          description: 'OK'
        409:
          $ref: '#/components/responses/ConflictWithPriorityRuleError'
        422:
          $ref: '#/components/responses/RequestValidationRuleError'
        400:
          $ref: '#/components/responses/ModuleNotExistsRuleError'
        403:
          $ref: '#/components/responses/UserNotBelongToTheDistributionCenterRuleError'
    get:
      tags:
        - Rules
      security:
        - basicAuth: []
      summary: Get a list of rules
      parameters:
        - name: "distributionCenterId"
          in: "query"
          description: "ID of distribution center"
          required: true
          schema:
            type: string
            format: uuid
          example: '9be66fcc-593e-4a0c-b5b7-af086dd99506'
        - name: "module"
          in: "query"
          description: "The module of the rule, if not value provided use general"
          required: false
          schema:
            type: string
          example: "returns"
        - name: "limit"
          in: "query"
          description: "Limit the number of rules"
          required: false
          schema:
            type: integer
          example: 1
        - name: "offset"
          in: "query"
          description: "Offset the number of rules, usefull for pagination results"
          required: false
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/RuleListResponse'
        400:
          $ref: '#/components/responses/BadRequestError'
  /v3/rules/{id}:
    get:
      tags:
        - Rules
      security:
        - basicAuth: []
      summary: Get a rule by id
      parameters:
        - name: "id"
          in: "path"
          description: "ID of the rule"
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          $ref: '#/components/responses/RuleResponse'
        422:
          $ref: '#/components/responses/UnprocessableContentError'
        404:
          $ref: '#/components/responses/RuleNotFoundError'
        403:
          $ref: '#/components/responses/UserNotBelongToTheDistributionCenterRuleError'
    put:
      tags:
        - Rules
      security:
        - basicAuth: []
      summary: Update the properties of the rule
      parameters:
        - name: "id"
          in: "path"
          description: "ID of the rule"
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        $ref: '#/components/requestBodies/RulesUpdateRequest'
      responses:
        200:
          description: 'OK'
        422:
          $ref: '#/components/responses/UnprocessableContentError'
        404:
          $ref: '#/components/responses/RuleNotFoundError'
        403:
          $ref: '#/components/responses/UserNotBelongToTheDistributionCenterRuleError'
    delete:
      tags:
        - Rules
      security:
        - basicAuth: []
      summary: Update the properties of the rule
      parameters:
        - name: "id"
          in: "path"
          description: "ID of the rule"
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'OK'
        404:
          $ref: '#/components/responses/RuleNotFoundError'
        403:
          $ref: '#/components/responses/UserNotBelongToTheDistributionCenterRuleError'

  /v3/rules/match:
    post:
      summary: Return matched rule
      description: Return the rule that meets the conditions
      tags:
        - Rules
      security:
        - basicAuth: []
      requestBody:
        $ref: '#/components/requestBodies/RulesMatchRequest'
      responses:
        200:
          $ref: '#/components/responses/RuleResponse'
        422:
          $ref: '#/components/responses/UnprocessableMatchContentError'
        400:
          $ref: '#/components/responses/NoRuleMatchError'


  /v3/distribution-centers/{distributionCenterId}/trackings-webhook:
    post:
      tags:
        - TrackingsWebhook
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Create Trackings Webhook configuration
      requestBody:
        $ref: '#/components/requestBodies/TrackingsWebhookConfigurationRequest'
      responses:
        201:
          description: 'Created'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        500:
          $ref: '#/components/responses/UnexpectedError'

    put:
      tags:
        - TrackingsWebhook
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Edit Trackings Webhook configuration
      requestBody:
        $ref: '#/components/requestBodies/TrackingsWebhookConfigurationRequest'
      responses:
        204:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        422:
          $ref: '#/components/responses/MissingOrInvalidFields'
        500:
          $ref: '#/components/responses/UnexpectedError'

    get:
      tags:
        - TrackingsWebhook
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Get Trackings Webhook configuration
      responses:
        200:
          $ref: '#/components/responses/TrackingsWebhookConfigurationResponse'
        404:
          $ref: '#/components/responses/NotFound'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'
        500:
          $ref: '#/components/responses/UnexpectedError'


  /v3/distribution-centers/{distributionCenterId}/trackings-webhook/activate:
    patch:
      tags:
        - TrackingsWebhook
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Activates Trackings Webhook
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/distribution-centers/{distributionCenterId}/trackings-webhook/deactivate:
    patch:
      tags:
        - TrackingsWebhook
      parameters:
        - in: path
          name: distributionCenterId
          schema:
            type: string
          required: true
          description: 'Distribution Center identifier'
      security:
        - basicAuth: []
      summary: Deactivates Trackings Webhook
      responses:
        200:
          description: 'OK'
        403:
          $ref: '#/components/responses/UserDoesNotBelongToDistributionCenterError'

  /v3/address-validation:
    get:
      tags:
        - Address Validation and Geolocation
      parameters:
        - in: query
          name: street
          schema:
            type: string
            example: Carrer Llauder
          required: true
          description: Street name (refer from including number, floor or door information)
        - in: query
          name: number
          schema:
            type: string
            example: 1
          required: false
          description: House number (refer from including floor or door information)
        - in: query
          name: city
          schema:
            type: string
            example: Barcelona
          required: false
          description: Locality
        - in: query
          name: zipCode
          schema:
            type: string
            example: 08003
          required: true
          description: Zip code
        - in: query
          name: countryCode
          schema:
            type: string
            example: ES
          required: true
          description: Country code in ISO format 3166-1-alpha-2
      security:
        - basicAuth: []
      summary: Validates that the address passed exists and is correct. If correct, the address will be returned normalized including Geolocation.
      responses:
        200:
          description: Valid match
          content:
            application/json:
              schema:
                properties:
                  match:
                    $ref: '#/components/schemas/Match'
                  address:
                    type: object
                    properties:
                      street:
                        type: number
                        description: Normalized street name, not including number, floor or door information
                        example: Carrer Llauder
                      number:
                        type: string
                        description: House number
                        example: 1
                      city:
                        type: string
                        description: Locality's name
                        example: Barcelona
                      zipCode:
                        type: string
                        description: Postal code of the municipality
                        example: 08003
                      countryCode:
                        type: string
                        description: Country code in ISO format 3166-1-alpha-2
                        example: ES
                      country:
                        type: string
                        description: Last number of the range configurd
                        example: Spain
                      latitude:
                        type: number
                        description: Latitude
                        example: 41.3816785
                      longitude:
                        type: number
                        description: Longitude
                        example: 2.180848

        404:
          description: Match not found
          content:
            application/json:
              schema:
                properties:
                  match:
                    allOf:
                      - $ref: '#/components/schemas/Match'
                      - example: none
                  address:
                    example: null

components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic

  requestBodies:
    AdvancedTrackingConfigurationRequest:
      description: 'Advanced tracking configuration request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/AdvancedTrackingConfiguration'

    BillingAccountRequest:
      description: 'Billing account request'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BillingAccount'

    CostCenterRequest:
      description: Cost center properties and status
      content:
        application/json:
          schema:
            properties:
              status:
                type: boolean
                description: active or inactive
                example: true
              costCenter:
                type: string
                description: Alias identifier of the cost center
                example: DEFAULT
              labelType:
                type: string
                description: pdf or zpl depending on availability
                example: pdf
              labelSource:
                type: string
                description: carrier or label engine depending on availability
                example: carrier
              contact:
                type: string
                description: Carrier contact to be written to in case of opening a Comm Hub ticket
                example: support@dummy.com
              credentials:
                type: object
                description: Carrier credentials configured for the cost center (see credential fields)
                example:
                  userName: demo
                  password: demo

    DistributionCenterRequest:
      description: 'Distribution center creation request'
      content:
        application/json:
          schema:
            required:
              - name
              - address
              - zipCode
              - city
              - phone
              - email
            properties:
              name:
                type: string
                description: name of the distribution center
                example: Warehouse 1
              address:
                type: string
                description: Full address including street, mumber, floor and door
                example: Diagonal 25, 2 floor 1st
              city:
                type: string
                nullable: false
                description: Municipality
                example: 'Barcelona'
              zipCode:
                type: string
                nullable: false
                description: Postal code of the municipality
                example: '08005'
              countryCode:
                type: string
                nullable: true
                description: Country code in ISO format 3166-1-alpha-2
                example: ES
              stateCode:
                type: string
                nullable: true
                description: State code in ISO format 3166-1-alpha-2 (only for US and Canada)
                example: null
              observations:
                type: string
                nullable: true
                description: Extra information regarding the address
                example: Back door, beware the dog
              phone:
                type: string
                nullable: false
                description: 'Phone number. Depending on the carrier and country international prefix might be required (ex: 0034 666778899)'
                example: 666778899
              email:
                type: string
                nullable: false
                description: Email
                example: mymail@example.com
              latitude:
                type: number
                nullable: true
                description: Latitude
                example: 41.3816785
              longitude:
                type: number
                nullable: true
                description: Longitude
                example: 2.180848
              billingAccountId:
                type: string
                format: uuid
                nullable: true
                description: Billing account uuid which is associated to this distribution center

    OrderRequest:
      description: 'Order creation request'
      content:
        application/json:
          schema:
            required:
              - to
              - carrierCode
              - serviceCode
              - costCenterCode
              - clientReference
              - shippingDate
              - distributionCenterId
              - parcels
            properties:
              to:
                $ref: '#/components/schemas/Address'
              carrierCode:
                type: string
                nullable: true
                description: Carrier code. If rules are to be use this parameter should be set to 'auto'.
                example: dummy
              serviceCode:
                type: string
                nullable: true
                description: Service code. If rules are to be use this parameter should be set to 'auto'.
                example: standard
              costCenterCode:
                type: string
                nullable: true
                description: Alias identifier of the cost center
                default: DEFAULT
              distributionCenterId:
                type: string
                description: 'Distribution center identifier'
                example: '51453d83-8014-11ea-bae6-026b033c7ea0'
              clientReference:
                type: string
                nullable: false
                description: Referennce of the shipping order in the client systems
                example: REF0123456789
              shippingDate:
                $ref: '#/components/schemas/ShippingDate'
              description:
                type: string
                nullable: true
                description: Description of the expedition articles (required for crossborder internationa expeditions if no description by parcel[items] is present)
                example: Shoes and Shirts
              totalAmount:
                $ref: '#/components/schemas/TotalAmount'
              parcels:
                type: array
                items:
                  $ref: '#/components/schemas/Parcel'
              serviceAttributes:
                $ref: '#/components/schemas/ServiceAttributes'
              clientAdditionalInfo:
                $ref: '#/components/schemas/ClientAdditionalInfo'
              bulky:
                $ref: '#/components/schemas/Bulky'
              customs:
                $ref: '#/components/schemas/Customs'

    UpdateOrderRequest:
      description: 'Order update request'
      content:
        application/json:
          schema:
            type: object
            properties:
              to:
                $ref: '#/components/schemas/Address'
              shippingDate:
                $ref: '#/components/schemas/ShippingDate'
              parcels:
                type: array
                items:
                  $ref: '#/components/schemas/Parcel'
              serviceAttributes:
                $ref: '#/components/schemas/ServiceAttributes'
              clientAdditionalInfo:
                $ref: '#/components/schemas/ClientAdditionalInfo'

    ShipmentRequest:
      description: 'Shipment documentation request'
      content:
        application/json:
          schema:
            required:
              - to
              - carrierCode
              - serviceCode
              - costCenterCode
              - clientReference
              - shippingDate
              - distributionCenterId
              - parcels
            properties:
              to:
                $ref: '#/components/schemas/Address'
              carrierCode:
                type: string
                nullable: true
                description: Carrier code. If rules are to be use this parameter should be set to 'auto'.
                example: dummy
              serviceCode:
                type: string
                nullable: true
                description: Service code. If rules are to be use this parameter should be set to 'auto'.
                example: standard
              costCenterCode:
                type: string
                nullable: true
                description: Alias identifier of the cost center
                default: DEFAULT
              distributionCenterId:
                type: string
                description: 'Distribution center identifier'
                example: '51453d83-8014-11ea-bae6-026b033c7ea0'
              clientReference:
                type: string
                nullable: false
                description: Referennce of the shipping order in the client systems
                example: REF0123456789
              shippingDate:
                $ref: '#/components/schemas/ShippingDate'
              description:
                type: string
                nullable: true
                description: Description of the expedition articles (required for crossborder internationa expeditions if no description by parcel[items] is present)
                example: Shoes and Shirts
              totalAmount:
                $ref: '#/components/schemas/TotalAmount'
              parcels:
                type: array
                items:
                  $ref: '#/components/schemas/Parcel'
              serviceAttributes:
                $ref: '#/components/schemas/ServiceAttributes'
              clientAdditionalInfo:
                $ref: '#/components/schemas/ClientAdditionalInfo'
              bulky:
                $ref: '#/components/schemas/Bulky'
              customs:
                $ref: '#/components/schemas/Customs'

    ReturnRequest:
      description: 'Return documentation request'
      content:
        application/json:
          schema:
            required:
              - from
              - carrierCode
              - serviceCode
              - costCenterCode
              - clientReference
              - shippingDate
              - distributionCenterId
              - parcels
            properties:
              from:
                $ref: '#/components/schemas/Address'
              carrierCode:
                type: string
                nullable: true
                description: Carrier code. If rules are to be use this parameter should be set to 'auto'.
                example: dummy
              serviceCode:
                type: string
                nullable: true
                description: Service code. If rules are to be use this parameter should be set to 'auto'.
                example: standard
              costCenterCode:
                type: string
                nullable: true
                description: Alias identifier of the cost center
                default: DEFAULT
              distributionCenterId:
                type: string
                description: 'Distribution center identifier'
                example: '51453d83-8014-11ea-bae6-026b033c7ea0'
              clientReference:
                type: string
                nullable: false
                description: Referennce of the shipping order in the client systems
                example: REF0123456789
              shippingDate:
                $ref: '#/components/schemas/ShippingDate'
              description:
                type: string
                nullable: true
                description: Description of the expedition articles (required for crossborder internationa expeditions if no description by parcel[items] is present)
                example: Shoes and Shirts
              totalAmount:
                $ref: '#/components/schemas/TotalAmount'
              parcels:
                type: array
                items:
                  $ref: '#/components/schemas/Parcel'
              serviceAttributes:
                $ref: '#/components/schemas/ServiceAttributes'
              clientAdditionalInfo:
                $ref: '#/components/schemas/ClientAdditionalInfo'
              bulky:
                $ref: '#/components/schemas/Bulky'
              customs:
                $ref: '#/components/schemas/Customs'

    ReturnsWebPortalConfigurationRequest:
      description: 'Returns Web Portal configuration request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ReturnsWebPortalConfiguration'

    RulesConfigurationRequest:
      description: 'Rules configuration request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/RulesConfiguration'
    RulesUpdateRequest:
      description: 'Rules configuration request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/RulesUpdateConfiguration'

    RulesMatchRequest:
      description: 'Rule match request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/RulesMatch'

    TrackingsWebhookConfigurationRequest:
      description: 'Returns Web Portal configuration request'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/TrackingsWebhookConfiguration'

  responses:
    AdvancedTrackingConfigurationResponse:
      description: 'Advanced tracking configuration response'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/AdvancedTrackingConfiguration'
              - properties:
                  logo:
                    type: string
                    format: url
                    nullable: true
                    description: 'Logo url'
                    example: 'https://www.deliverea.com/wp-content/uploads/2020/02/logo-color.png'

    SubdomainAlreadyTaken:
      description: 'A request field is invalid or missing'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'VE0900'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'The subdomain X is not available. Please choose a different one'

    ListBillingAccountResponse:
      description: 'Billing Account list response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/BillingAccount'

    BillingAccountResponse:
      description: 'Billing Account response'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/BillingAccount'
              - properties:
                  distributionCenterIds:
                    type: array
                    description: Distribution centers ids associated to this billing address
                    items:
                      type: string
                      format: uuid
                      example: 49030f12-79e6-4e1f-9e3d-b3f6774d742b

    ListCarriersResponse:
      description: 'Lists carriers and available methods'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Carrier'

    ListServicesResponse:
      description: 'Lists available services for a carrier'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/Service'

    ListCostCentersResponse:
      description: 'Get cost center response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: boolean
                      description: active or inactive
                      example: true
                    costCenter:
                      type: string
                      description: Alias identifier of the cost center
                      example: DEFAULT
                    carrierCode:
                      type: string
                      nullable: true
                      description: Carrier to be used when creating the shipment
                      example: dummy
                    distributionCenterId:
                      type: string
                      description: 'Distribution center identifier'
                      example: '51453d83-8014-11ea-bae6-026b033c7ea0'
                    labelType:
                      type: string
                      description: pdf or zpl depending on availability
                      example: pdf
                    labelSource:
                      type: string
                      description: carrier or label engine depending on availability
                      example: carrier
                    contact:
                      type: string
                      description: Carrier contact to be written to in case of opening a Comm Hub ticket
                      example: support@dummy.com

    GetCostCenterResponse:
      description: 'Get cost center response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: object
                properties:
                  status:
                    type: boolean
                    description: active or inactive
                    example: true
                  costCenter:
                    type: string
                    description: Alias identifier of the cost center
                    example: DEFAULT
                  carrierCode:
                    type: string
                    nullable: true
                    description: Carrier to be used when creating the shipment
                    example: dummy
                  distributionCenterId:
                    type: string
                    description: 'Distribution center identifier'
                    example: '51453d83-8014-11ea-bae6-026b033c7ea0'
                  labelType:
                    type: string
                    description: pdf or zpl depending on availability
                    example: pdf
                  labelSource:
                    type: string
                    description: carrier or label engine depending on availability
                    example: carrier
                  contact:
                    type: string
                    description: Carrier contact to be written to in case of opening a Comm Hub ticket
                    example: support@dummy.com
                  credentials:
                    type: object
                    description: Carrier credentials configured for the cost center (see credential fields)
                    example:
                      userName: demo
                      password: demo
                  services:
                    type: array
                    items:
                      type: object
                      properties:
                        serviceCode:
                          type: string
                          description: Service code identifier in Deliverea's systems
                          example: standard
                        status:
                          type: boolean
                          description: Active or not
                          example: true

    ListDistributionCentersResponse:
      description: 'Lists the distribution centers of the current user'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/DistributionCenter'

    GetDistributionCenterResponse:
      description: 'Get distribution centers response'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/DistributionCenter'


    CreateOrderResponse:
      description: 'Order created successfully response'
      content:
        application/json:
          schema:
            properties:
              delivereaReference:
                type: string
                description: Unique deliverea reference
                example: D5312427d7f72b0
              carrierCode:
                type: string
                nullable: true
                description: Carrier to be used when creating the shipment
                example: dummy
              serviceCode:
                type: string
                nullable: true
                description: Service to be used when creating the shipment
                example: standard
              costCenterCode:
                type: string
                nullable: true
                description: Alias identifier of the cost center
                default: DEFAULT

    CreateShipmentResponse:
      description: 'Shipment documented successfully response'
      content:
        application/json:
          schema:
            required:
              - delivereaReference
              - clientReference
              - carrierCode
              - serviceCode
              - costCenterCode
            properties:
              data:
                type: object
                properties:
                  delivereaReference:
                    type: string
                    description: Unique deliverea reference
                    example: D5312427d7f72b0
                  carrierReference:
                    type: string
                    description: Unique carrier reference
                    example: CAR987654321
                  carrierCode:
                    type: string
                    nullable: true
                    description: Carrier to be used when creating the shipment
                    example: dummy
                  serviceCode:
                    type: string
                    nullable: true
                    description: Service to be used when creating the shipment
                    example: standard
                  costCenterCode:
                    type: string
                    nullable: true
                    description: Alias identifier of the cost center
                    default: DEFAULT

    SearchOrdersResponse:
      description: 'Search orders response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/OrderSearchResult'
              hasMore:
                type: boolean
                description: Indicates if there are more records in the search
                example: true

    SearchShipmentsResponse:
      description: 'Search shipments response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ShipmentsSearchResult'
              hasMore:
                type: boolean
                description: Indicates if there are more records in the search
                example: true

    SearchReturnsResponse:
      description: 'Search returns response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ReturnsSearchResult'
              hasMore:
                type: boolean
                description: Indicates if there are more records in the search
                example: true

    GetShipmentResponse:
      description: 'Shipment response'
      content:
        application/json:
          schema:
            properties:
              data:
                $ref: '#/components/schemas/Shipment'

    GetOrderResponse:
      description: 'Order response'
      content:
        application/json:
          schema:
            properties:
              data:
                $ref: '#/components/schemas/Order'

    GetReturnResponse:
      description: 'Shipment response'
      content:
        application/json:
          schema:
            properties:
              data:
                $ref: '#/components/schemas/Return'


    LabelResponse:
      description: 'Label response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: object
                properties:
                  type:
                    type: string
                    description: File type
                    enum: [pdf,zpl]
                    example: pdf
                  content:
                    type: string
                    description: Base 64 encoded file
                    example: "JVBERi0xLjQKMyAwIG9iago8PC9UeXBlI..."
                  delivereaReference:
                    type: string
                    description: Unique deliverea reference
                    example: D5312427d7f72b0
                  carrierReference:
                    type: string
                    description: Unique carrier reference
                    example: CAR987654321
                  clientReference:
                    type: string
                    description: Unique client reference
                    example: REF0123456789
                  carrierCode:
                    type: string
                    description: Error code coming from the carrier
                    example: 20010

    GetExpeditionPodResponse:
      description: 'Label response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: object
                properties:
                  type:
                    type: string
                    description: File type
                    enum: [pdf,ur]
                    example: pdf
                  content:
                    type: string
                    description: Base 64 encoded file or url
                    example: "JVBERi0xLjQKMyAwIG9iago8PC9UeXBlI..."

    GetExpeditionTrackingsResponse:
      description: 'Trackings response'
      content:
        application/json:
          schema:
            properties:
              data:
                type: object
                required:
                  - delivereaReference
                  - clientReference
                properties:
                  delivereaReference:
                    type: string
                    description: Unique deliverea reference
                    example: D5312427d7f72b0
                  carrierReference:
                    type: string
                    description: Unique carrier reference
                    example: CAR987654321
                  clientReference:
                    type: string
                    description: Unique client reference
                    example: REF0123456789
                  trackings:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                          description: Deliverea tracking code
                          example: '05'
                        message:
                          type: string
                          description: Deliverea description of the tracking code
                          example: Picked up
                        timestamp:
                          type: number
                          description: Timestamp of the tracking event
                          example: 1647267147
                        trackingLogs:
                          type: array
                          items:
                            type: object
                            properties:
                              message:
                                type: string
                                description: Carrier original message
                                example: Collected in facilities
                              timestamp:
                                type: number
                                description: Timestamp of the tracking event
                                example: 1647267147
                        createdAt:
                          type: number
                          description: Timestamp of the tracking creation
                          example: 1647267147

    GenerateManifestResponse:
      description: 'Generate manifest response'
      content:
        application/json:
          schema:
            properties:
              content:
                type: string
                description: File contents base64 encoded
                example: VBERi0x...0NTQzNQolJUVPRg==
              mimeType:
                type: string
                description: File mime type
                default: application/pdf
                example: application/pdf

    ### Error responses ###
    MissingOrInvalidFieldsOrCarrierDocumentationError:
      description: 'There are missing or invalid fields or there was an error documenting against the carrier'
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/CarrierDocumentationErrorProperties'
              - $ref: '#/components/schemas/MissingOrInvalidFieldsProperties'
          examples:
            CarrierDocumentationError:
              summary: There are missing or invalid fields
              value:
                error:
                  code: 'CE001'
                  message: 'Authentication against the carrier failed'
                  carrierCode:  'AUTHERR1'
                  carrierMessage: 'The token is invalid'
            MissingOrInvalidFields:
              summary: there was an error documenting against the carrier
              value:
                error:
                  code: 'VE0900'
                  message: 'X required field is missing | Format of field X is invalid'
                  detail:
                    clientReference: This value should not be blank.

    LabelEngineDisabled:
      description: 'Resource not found'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'CE0005'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Label engine is disabled.'

    MissingLabel:
      description: 'Missing label'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'VE0301'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Parcel with code 123456 not generated for shipment with deliverea reference: S70d8a268ad5921'

    ShipmentNotDelivered:
      description: 'Shipment not delivered yet'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'VE0905'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Shipment with reference "Se0fe79c5fae2db" has not been delivered yet.'

    ParcelNotFound:
      description: 'Parcel not found'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'NF0013'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Parcel not found'

    ApiUserOrkeyInvalid:
      description: 'Api key invalid response'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'NA0002'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Api-user or api-key invalid'

    ReturnsWebPortalConfigurationResponse:
      description: 'Returns Web Portal configuration response'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/ReturnsWebPortalConfiguration'
              - properties:
                  logo:
                    type: string
                    format: url
                    nullable: true
                    description: 'Logo url'
                    example: 'https://www.deliverea.com/wp-content/uploads/2020/02/logo-color.png'

    RuleResponse:
      description: 'The rule object'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/Rule'
    RuleListResponse:
      description: 'The list of rules'
      content:
        application/json:
          schema:
            properties:
              data:
                type: object
                properties:
                  total:
                    type: number
                    description: "The total of rules queried without pagination"
                    example: 1
                  rules:
                    type: array
                    description: "The rules list"
                    items:
                      $ref: '#/components/schemas/Rule'


    BadRequestError:
      description: 'Required fields must be provided'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: "The error code"
                    example: "missing_distribution_center"
                  message:
                    type: string
                    description: "A description of the error"
                    example: "Missing distribution center id in query parameters"

    UnprocessableContentError:
      description: 'Error in the format of a parameter'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: "The error code"
                    example: "invalid_argument"
                  message:
                    type: string
                    description: "A description of the error"
                    example: "<Shared\\Domain\\ValueObject\\Uuid> does not allow the value <3da3e9f2-1436-4ff4-a2e4-327d189c333y>"

    UnprocessableMatchContentError:
      description: 'Error in the format of a parameter'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: "The error code"
                    example: "request_validation"
                  message:
                    type: string
                    description: "A description of the error"
                    example: "The request has an error"

    NoRuleMatchError:
      description: 'No rule match for the given data'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: "The error code"
                    example: "VE0400"
                  message:
                    type: string
                    description: "A description of the error"
                    example: "No rules matched for this expedition"

    RuleNotFoundError:
      description: 'Error in the format of a parameter'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: "The error code"
                    example: "rule.not_exists"
                  message:
                    type: string
                    description: "the description of the error"
                    example: "The rule <ruleId> does not exists"

    ConflictWithPriorityRuleError:
      description: 'Conflict with the priority of the rule'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: 'The error code'
                    example: 'rule.priority_already_exists'
                  message:
                    type: string
                    description: 'The description of the error'
                    example: 'The rule priority <2> already exists'

    ModuleNotExistsRuleError:
      description: 'The module not exists'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: 'The error code'
                    example: 'VE0900'
                  message:
                    type: string
                    description: 'The description of the error'
                    example: 'Module example not found'

    UserNotBelongToTheDistributionCenterRuleError:
      description: 'The user not belong to the distribution center'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: 'The error code'
                    example: 'NA0013'
                  message:
                    type: string
                    description: 'The description of the error'
                    example: 'User does not belong to this distribution center'

    RequestValidationRuleError:
      description: 'Error in the request body'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    description: 'The error code'
                    example: 'request_validation'
                  message:
                    type: string
                    description: 'The description of the error'
                    example: 'The request has an error'

    TrackingsWebhookConfigurationResponse:
      description: 'Trackings webhook configuration response'
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/TrackingsWebhookConfiguration'

    MissingOrInvalidFields:
      description: 'A request field is invalid or missing'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'VE0900'
                  message:
                    type: string
                    description: Error info
                    example: 'X required field is missing | Format of field X is invalid'
                  detail:
                    type: object
                    properties:
                      field:
                        type: string
                        example: This value should not be blank.

    UnprocessableEntity:
      description: 'Request could not be processed because there are missing or invalid fields'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: VE0900
                  message:
                    type: string
                    description: Error info
                    example: Missing or invalid field(s)
                  detail:
                    type: object
                    example:
                      distributionCenterId: This is not a valid UUID
                      carrierCode: This value should not be blank

    NotFound:
      description: 'Resource not found'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'NF0002'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Resource not found'

    ApiUserOrKeyInvalid:
      description: 'Api key invalid response'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'NA0002'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Api-user or api-key invalid'

    UserDoesNotBelongToDistributionCenterError:
      description: 'Unauthorized response'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'NA0013'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'User does not belong to this distribution center'

    UnexpectedError:
      description: 'Something unexpected went wrong'
      content:
        application/json:
          schema:
            properties:
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: 'UE0001'
                  message:
                    type: string
                    description: 'Error info'
                    example: 'Unexpected error. Please contact with us through support@deliverea.com'

  schemas:
    AdvancedTrackingConfiguration:
      type: object
      properties:
        active:
          type: boolean
          nullable: false
          description: 'Active or not'
          example: true
        subdomain:
          type: string
          nullable: true
          description: 'Advanced tracking webportal subdomain (https://mysubdomain.trackorder.io)'
          example: 'mysubdomain'
        color:
          type: string
          nullable: true
          description: 'Hexadecimal code color'
          example: '#D62424'
        senderId:
          type: string
          description: 'Sender email identifier that will be the sender of the advanced tracking communications'
          example: '49030f12-79e6-4e1f-9e3d-b3f6774d742b'
        supportEmail:
          type: string
          format: email
          nullable: true
          description: 'Support email that will be displayed in the advanced tracking communications'
          example: support@mydomain.com
        emailNotifications:
          type: array
          items:
            type: string
            enum: [
              'documented',
              'pending_pickup',
              'picked_up',
              'leaving_origin',
              'customs_inspection',
              'on_way_to_destination',
              'ready_to_deliver',
              'delivered',
              'incidence',
              'exception',
              'deposited_in_drop_point'
            ]
            description: 'Active email notifications'
          example: [
            'picked_up',
            'ready_to_deliver',
            'deposited_in_drop_point'
          ]

    BillingAccount:
      type: object
      properties:
        name:
          type: string
          description: name of the billing account
          example: Europe billing account
        companyName:
          type: string
          description: Formal company name
          example: Acme
        billingName:
          type: string
          description: Billing company name
          example: Acme, INC.
        vat:
          type: string
          description: VAT number (must include country code for outside spain)
          example: B08123456
        address:
          type: string
          description: Full address including street, mumber, floor and door
          example: Diagonal 25, 2 floor 1st
        city:
          type: string
          description: City of the company
          example: Barcelona
        zipCode:
          type: string
          description: Zip code of the company
          example: 08003
        stateCode:
          type: string
          nullable: true
          description: State code in ISO format 3166-1-alpha-2 (only for US and Canada)
          example: CA
        countryCode:
          type: string
          description: Country code in ISO format 3166-1-alpha-2
          example: ES
        active:
          type: boolean
          description: Active or not
          example: true

    Carrier:
      type: object
      properties:
        code:
          type: string
          description: Unique code identifier of the carrier (usually carrier name snakeCase)
          example: dummy
        newShipment:
          type: boolean
          description: Whether the carrier has create shipment method
          example: true
        newShipmentWithPickup:
          type: boolean
          description: Whether the carrier has create shipment with pickup method (usually for returns)
          example: true
        getDropPoints:
          type: boolean
          description: Whether the carrier has drop points method
          example: false
        cancelShipment:
          type: boolean
          description: Whether the carrier has cancel shipment method
          example: true
        getPod:
          type: boolean
          description: Whether the carrier has get POD method
          example: true
        needsLatLon:
          type: boolean
          description: Whether the carrier needs Latitude an Longitud to be defined when creating an expediton
          example: false
        labelTypes:
          $ref: '#/components/schemas/labelTypes'
        labelSources:
          $ref: '#/components/schemas/labelSources'

    Service:
      type: object
      properties:
        code:
          type: string
          description: Identifier code of the servie in Deliverea's systems
          example: correos-10
        type:
          type: string
          enum:
            [sameDay, '24', '48', '72', others]
          description: Type of service according to delivery time
          example: '24'
        name:
          type: string
          description: Comercial name of the service
          example: 'Paq 10'
        description:
          type: string
          description: Any aditional service observations
          example: Mono-parcel

    labelTypes:
      type: array
      items:
        $ref: '#/components/schemas/labelType'
      example: [pdf,zpl]

    labelSources:
      type: array
      items:
        $ref: '#/components/schemas/labelSource'
      example: [carrier,label-engine]

    credentialField:
      type: object
      description: Credential to be configured for using the carrier
      properties:
        key:
          type: string
          example: userName
        name:
          type: string
          example: User

    labelType:
      type: string
      enum: [pdf, zpl]
      example:
        'pdf'

    labelSource:
      type: string
      enum: [carrier,label-engine]
      example:
        'carrier'

    DistributionCenter:
      type: object
      properties:
        id:
          type: string
          description: UUID identifier of the dictribution center
          example: 966e4225-6cfa-11ea-bae6-026b033c7ea0
        active:
          type: boolean
          description: active or inactive
          example: true
        name:
          type: string
          description: name of the distribution center
          example: Warehouse 1
        address:
          type: string
          description: Full address including street, mumber, floor and door
          example: Diagonal 25, 2 floor 1st
        city:
          type: string
          nullable: false
          description: Municipality
          example: 'Barcelona'
        zipCode:
          type: string
          nullable: false
          description: Postal code of the municipality
          example: '08005'
        countryCode:
          type: string
          nullable: true
          description: State code in ISO format 3166-1-alpha-2
          example: ES
        stateCode:
          type: string
          nullable: true
          description: State code in ISO format 3166-1-alpha-2 (only for US and Canada)
          example: null
        observations:
          type: string
          nullable: true
          description: Extra information regarding the address
          example: Back door, beware the dog
        phone:
          type: string
          nullable: false
          description: 'Phone number. Depending on the carrier and country international prefix might be required (ex: 0034 666778899)'
          example: 666778899
        email:
          type: string
          nullable: false
          description: Email
          example: mymail@example.com
        latitude:
          type: number
          nullable: true
          description: Latitude
          example: 41.3816785
        longitude:
          type: number
          nullable: true
          description: Longitude
          example: 2.180848
        createdAt:
          type: string
          format: 'ISO-8601 (YYYY-MM-DDThh:mm:ssZ)'
          example: '2021-01-03T13:00:54+0100'
        updatedAt:
          type: string
          format: 'ISO-8601 (YYYY-MM-DDThh:mm:ssZ)'
          example: '2021-01-03T13:00:54+0100'
        billingAccountId:
          type: string
          format: uuid
          nullable: true
          description: Billing account uuid which is associated to this distribution center

    Order:
      type: object
      required:
        - carrierCode
        - serviceCode
        - costCenterCode
        - clientReference
        - shippingDate
        - distributionCenterId
        - parcels
      properties:
        delivereaReference:
          type: string
          description: Unique deliverea reference
          example: D5312427d7f72b0
        clientReference:
          type: string
          nullable: false
          description: Referennce of the shipping order in the client systems
          example: REF0123456789
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        expeditionType:
          type: string
          enum:
            [
              'shipment',
              'return'
            ]
        to:
          $ref: '#/components/schemas/Address'
        from:
          $ref: '#/components/schemas/Address'
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        parcels:
          type: array
          items:
            $ref: '#/components/schemas/ParcelResponse'
        serviceAttributes:
          $ref: '#/components/schemas/ServiceAttributes'
        clientAdditionalInfo:
          $ref: '#/components/schemas/ClientAdditionalInfo'
        bulky:
          $ref: '#/components/schemas/Bulky'
        customs:
          $ref: '#/components/schemas/Customs'
        status:
          $ref: '#/components/schemas/OrderStatus'
        documentationAttempt:
          type: object
          properties:
            current:
              description: Current attempt on documenting the order
              type: string
              example: 2
            max:
              description: Maximum retry attemps to document the order
              type: string
              example: 15
          description: When on "pendig" status Documentation attempts vs max retries
          example: {
            current: 2,
            max: 15
          }
        documentationErrorMessage:
          type: string
          description: When on "error_documented" status, the error detail
          example: null
        label:
          $ref: '#/components/schemas/ExpeditionDetailsLabel'

    Shipment:
      type: object
      required:
        - carrierCode
        - serviceCode
        - costCenterCode
        - clientReference
        - shippingDate
        - distributionCenterId
        - parcels
      properties:
        to:
          $ref: '#/components/schemas/Address'
        from:
          $ref: '#/components/schemas/Address'
        status:
          $ref: '#/components/schemas/Status'
        delivereaReference:
          type: string
          description: Unique deliverea reference
          example: D5312427d7f72b0
        carrierReference:
          type: string
          description: Unique carrier reference
          example: CAR987654321
        clientReference:
          type: string
          nullable: false
          description: Referennce of the shipping order in the client systems
          example: REF0123456789
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        deliveryDate:
          $ref: '#/components/schemas/DeliveryDate'
        description:
          type: string
          nullable: true
          description: Description of the expedition articles (required for crossborder internationa expeditions if no description by parcel[items] is present)
          example: Shoes and Shirts
        totalAmount:
          $ref: '#/components/schemas/TotalAmount'
        currentTrackingCode:
          description: Tracking code the shipment is actually at
          type: string
          example: '11'
        createdAt:
          $ref: '#/components/schemas/CreatedAtDate'
        parcels:
          type: array
          items:
            $ref: '#/components/schemas/ParcelResponse'
        serviceAttributes:
          $ref: '#/components/schemas/ServiceAttributes'
        clientAdditionalInfo:
          $ref: '#/components/schemas/ClientAdditionalInfo'
        bulky:
          $ref: '#/components/schemas/Bulky'
        customs:
          $ref: '#/components/schemas/Customs'
        label:
          $ref: '#/components/schemas/ExpeditionDetailsLabel'

    Return:
      type: object
      required:
        - carrierCode
        - serviceCode
        - costCenterCode
        - clientReference
        - shippingDate
        - distributionCenterId
        - parcels
      properties:
        to:
          $ref: '#/components/schemas/Address'
        from:
          $ref: '#/components/schemas/Address'
        parentReference:
          type: string
          description: Deliverea reference of the original shipment the return was created from
          example: D9d98ba32e091dd
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        clientReference:
          type: string
          nullable: false
          description: Referennce of the shipping order in the client systems
          example: REF0123456789
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        deliveryDate:
          $ref: '#/components/schemas/DeliveryDate'
        description:
          type: string
          nullable: true
          description: Description of the expedition articles (required for crossborder internationa expeditions if no description by parcel[items] is present)
          example: Shoes and Shirts
        totalAmount:
          $ref: '#/components/schemas/TotalAmount'
        currentTrackingCode:
          description: Tracking code the return is currently at
          type: string
          example: '11'
        createdAt:
          allOf:
            - $ref: '#/components/schemas/CreatedAtDate'
        parcels:
          type: array
          items:
            $ref: '#/components/schemas/Parcel'
        serviceAttributes:
          $ref: '#/components/schemas/ServiceAttributes'
        clientAdditionalInfo:
          $ref: '#/components/schemas/ClientAdditionalInfo'
        bulky:
          $ref: '#/components/schemas/Bulky'
        customs:
          $ref: '#/components/schemas/Customs'
        label:
          $ref: '#/components/schemas/ExpeditionDetailsLabel'

    OrderSearchResult:
      type: object
      required:
        - carrierCode
        - serviceCode
        - costCenterCode
        - delivereaReference
        - clientReference
      properties:
        expeditionType:
          type: string
          enum:
            [
              'shipment',
              'return'
            ]
          description: Type of expedition the order will document to
          example: 'shipment'
        status:
          allOf:
            - $ref: '#/components/schemas/OrderStatus'
            - example: 'pending'
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        delivereaReference:
          type: string
          description: Unique deliverea reference
          example: D5312427d7f72b0
        clientReference:
          type: string
          description: Unique client reference
          example: REF0123456789
        createdAt:
          $ref: '#/components/schemas/CreatedAtDate'
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        from:
          type: object
          properties:
            name:
              type: string
              nullable: false
              description: Full name of the person or company
              example: John Doe
            countryCode:
              type: string
              nullable: false
              description: Country code in ISO format 3166-1-alpha-2
              example: ES
        to:
          type: object
          properties:
            name:
              type: string
              nullable: false
              description: Full name of the person or company
              example: John Doe
            countryCode:
              type: string
              nullable: false
              description: Country code in ISO format 3166-1-alpha-2
              example: ES
        totalParcels:
          type: number
          description: Total parcels of the expedition
          example: 3


    ShipmentsSearchResult:
      type: object
      required:
        - clientReference
        - shippingDate
        - carrierCode
        - serviceCode
        - costCenterCode
        - distributionCenterId
        - totalWeight
        - totalVolume
      properties:
        status:
          $ref: '#/components/schemas/Status'
        delivereaReference:
          type: string
          description: Unique deliverea reference
          example: D5312427d7f72b0
        carrierReference:
          type: string
          description: Unique carrier reference
          example: CAR987654321
        clientReference:
          type: string
          nullable: false
          description: Referennce of the shipping order in the client systems
          example: REF0123456789
        to:
          $ref: '#/components/schemas/AddressSummary'
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        createdAt:
          $ref: '#/components/schemas/CreatedAtDate'
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        deliveryDate:
          $ref: '#/components/schemas/DeliveryDate'
        totalWeight:
          type: number
          description: Sum of the weight of all the parcels of the expedition (kg)
          example: 3
        totalVolume:
          type: number
          description: Sum of the volume of all the parcels of the expedition (cm3)
          example: 1.5
        currentTrackingCode:
          description: Tracking code the shipment is currently at
          type: string
          example: '11'
        totalParcels:
          type: number
          description: Total parcels of the expedition
          example: 3

    ReturnsSearchResult:
      type: object
      required:
        - clientReference
        - shippingDate
        - carrierCode
        - serviceCode
        - costCenterCode
        - distributionCenterId
        - totalWeight
        - totalVolume
      properties:
        from:
          $ref: '#/components/schemas/AddressSummary'
        carrierCode:
          type: string
          nullable: true
          description: Carrier to be used when creating the shipment
          example: dummy
        serviceCode:
          type: string
          nullable: true
          description: Service to be used when creating the shipment
          example: standard
        costCenterCode:
          type: string
          nullable: true
          description: Alias identifier of the cost center
          default: DEFAULT
        distributionCenterId:
          type: string
          description: 'Distribution center identifier'
          example: '51453d83-8014-11ea-bae6-026b033c7ea0'
        clientReference:
          type: string
          nullable: false
          description: Referennce of the shipping order in the client systems
          example: REF0123456789
        shippingDate:
          $ref: '#/components/schemas/ShippingDate'
        totalWeight:
          type: number
          description: Sum of the weight of all the parcels of the expedition (kg)
          example: 3
        totalVolume:
          type: number
          description: Sum of the volume of all the parcels of the expedition (cm3)
          example: 1.5


    AddressSummary:
      type: object
      required:
        - name
        - address
        - city
        - zipCode
        - countryCode
      properties:
        name:
          type: string
          nullable: false
          description: Full name of the person or company
          example: John Doe
        address:
          type: string
          nullable: false
          description: Full address including street, mumber, floor and door
          example: Fake street, 404
        city:
          type: string
          nullable: false
          description: Municipality
          example: 'Barcelona'
        zipCode:
          type: string
          nullable: false
          description: Postal code of the municipality
          example: '08005'
        countryCode:
          type: string
          nullable: false
          description: Country code in ISO format 3166-1-alpha-2
          example: ES

    Address:
      type: object
      required:
        - name
        - address
        - city
        - zipCode
        - countryCode
        - phone
        - email
      properties:
        name:
          type: string
          nullable: false
          description: Full name of the person or company
          example: John Doe
        address:
          type: string
          nullable: false
          description: Full address details of receiver
          example: Fake street, 404
        city:
          type: string
          nullable: false
          description: Municipality
          example: 'Barcelona'
        zipCode:
          type: string
          nullable: false
          description: Postal code of the municipality
          example: '08005'
        countryCode:
          type: string
          nullable: false
          description: Country code in ISO format 3166-1-alpha-2
          example: ES
        idNumber:
          type: string
          nullable: true
          description: Natinal identification number of the person or company
          example: 77788999Q
        stateCode:
          type: string
          nullable: true
          description: State code in ISO format 3166-1-alpha-2 (only for US and Canada)
          example: CA
        observations:
          type: string
          nullable: true
          description: Extra information regarding the address
          example: Back door, beware the dog
        phone:
          type: string
          nullable: false
          description: 'Phone number. Depending on the carrier and country international prefix might be required (ex: 0034 666778899)'
          example: 666778899
        email:
          type: string
          nullable: false
          description: Email
          example: mymail@example.com
        latitude:
          type: number
          nullable: true
          description: Latitude
          example: 41.3816785
        longitude:
          type: number
          nullable: true
          description: Longitude
          example: 2.180848

    Parcel:
      type: object
      required:
        - weight
        - height
        - width
        - length
      properties:
        weight:
          type: number
          nullable: true
          description: Parcel's height in Kg
          example: 2
        height:
          type: number
          nullable: false
          description: Parcel's height in cm
          example: 15
        width:
          type: number
          nullable: false
          description: Parcel's height in cm
          example: 10
        length:
          type: number
          nullable: false
          description: Parcel's height in cm
          example: 20
        clientCode:
          type: string
          nullable: true
          description: Unique numric parcel identifier, provided by client and required for Label Engine flow
          example: 123456
        labelRangeCode:
          type: string
          nullable: true
          description: Numric label identifier assigned from the range configured for this carrier in the Label Engine Flow
          example: 100040789786
        labelBarcode:
          type: string
          nullable: true
          description: Barcode generated for this parcel in the Label Engine flow
          example: 100040789786X123456
        items:
          type: array
          items:
            $ref: '#/components/schemas/ParcelItem'
        QR:
          type: string
          nullable: true
          description: URL or string for create an QR code in the label
          example: https://www.deliverea.com/

    ParcelResponse:
      type: object
      required:
        - weight
        - height
        - width
        - length
      properties:
        weight:
          type: string
          nullable: true
          description: Parcel's height in Kg
          example: 2
        height:
          type: string
          nullable: false
          description: Parcel's height in cm
          example: 15
        width:
          type: string
          nullable: false
          description: Parcel's height in cm
          example: 10
        length:
          type: string
          nullable: false
          description: Parcel's height in cm
          example: 20
        clientCode:
          type: string
          nullable: true
          description: Unique parcel identifier, provided by client and required for Label Engine flow
          example: 123456
        labelBarcode:
          type: string
          nullable: true
          description: If using label engine flow, unique barcode identifying the parcel and extracted from the range provided by the carrier
          example: BAR1234567
        parcelNumber:
          type: string
          nullable: true
          description: 'Parcel number out of the total of the the order, (ex: 1, 2, 3...)'
        items:
          type: array
          items:
            $ref: '#/components/schemas/ParcelItem'

    ParcelItem:
      type: object
      properties:
        sku:
          type: string
          nullable: true
          description: Code of the item or sscc
          example: SKU123456789123456789
        description:
          type: string
          nullable: false
          description: Description of the items (required for cross-border international shipments)
          example: "Black shoes size 42"
        amount:
          type: string
          example: "50.2 EUR"
          format: 'Amount with up-to 3 digits after decimal separator + ISO 4217 currency code'
          description: Value or price per item (required for cross-border international shipments)
          nullable: true
        units:
          type: number
          nullable: false
          description: Quantity of items
          example: 1
          default: 1
        manufacturingCountryCode:
          type: string
          nullable: true
          description: Code of the manufacturing country in ISO format 3166-1-alpha-2
          example: ES
          # tariffCode:
          # type: string
          # nullable: true
          # description: Customs code of the item according to [TARIC](https://ec.europa.eu/taxation_customs/business/calculation-customs-duties/customs-tariff/eu-customs-tariff-taric_en)
          # example: ES

    ServiceAttributes:
      type: object
      description: 'Additional service attributes. Availability depends on the carrier and service.'
      properties:
        cashOnDelivery:
          type: string
          example: "50.2 EUR"
          format: 'Amount with up-to 3 digits after decimal separator + ISO 4217 currency code'
          description: Cash on delivery amount
          nullable: true
        dropPointKey:
          type: string
          nullable: true
          description: Drop-point identifier (for drop-point services)
          example: PS123456789
        pickupTime:
          allOf:
            - $ref: '#/components/schemas/HourRange'
            - description: The time must be provided in the standard format ISO-8601 (YYYY-MM-DDThh:mm:ssZ) taking into account the time zone of the origin country. We recommend using standard coding utilities that can take care of TimeZone and summer time hours automomatically.
            - nullable: true
        deliveryTime:
          allOf:
            - $ref: '#/components/schemas/HourRange'
            - description: The time must be provided in the standard format ISO-8601 (YYYY-MM-DDThh:mm:ssZ) taking into account the time zone of the destination country. We recommend using standard coding utilities that can take care of TimeZone and summer time hours automomatically.
            - nullable: true
        carrierNotifications:
          type: object
          nullable: true
          description: Notifications the carrier will send to the final customer
          properties:
            sms:
              type: boolean
              nullable: true
              description: The carrier will send info sms(s) to the final customer
              example: true
            email:
              type: boolean
              nullable: true
              description: The carrier will send info email(s) to the final customer
              example: true
        saturdayDelivery:
          type: boolean
          nullable: true
          description: Whether or not the expedition should be delivered on Saturday or wait until next Monday (availability depends on carrier and service)
          example: false
        includeReturnLabel:
          type: boolean
          nullable: true
          description: Whether or not to include dormant return label in case the final customer wants to return the expedition (availability depends on carrier and service)
          example: false
        returnProofOfDelivery:
          type: boolean
          nullable: true
          description: Whether or not to a proof of delivery should be returned back to origin (availability depends on carrier and service)
          example: false
        hideSender:
          type: boolean
          nullable: true
          description: Whether or not to hide sender information in the printed label (availability depends on carrier and service)
          example: false
        insuranceValue:
          type: string
          example: "50.2 EUR"
          format: 'Amount with up-to 3 digits after decimal separator + ISO 4217 currency code'
          description: Amount of the expedition insurance (necessary for expedition with insurance, availability depends on carrier and service)
          nullable: true
      example:
        saturdayDelivery: true
        carrierNotifications:
          email: true
        dropPointKey: PS123456789
        pickupTime:
          start: '2022-06-01T10:00:00+0100'
          end: '2022-06-01T12:00:00+0100'

    Customs:
      type: object
      properties:
        invoiceId:
          type: string
          description: 'Identifier of invoice details and/or file previously uploaded to Deliverea'
          example: '49030f12-79e6-4e1f-9e3d-b3f6774d742b'
      description: 'Information required for cross-border international customs'
      example:
        invoiceId: '49030f12-79e6-4e1f-9e3d-b3f6774d742b'

    ClientAdditionalInfo:
      type: object
      properties:
        category:
          type: string
          description: Identifier used to apply specific rules when Carrier, Service and Cost Center are to be autoassigned
          example: 'frozen'
        freeLabelText:
          type: string
          description: Custom text for print in the label
          example: 'Warehouse 45'
      description: 'Additional information, relevant for the cliente and/or Deliverea but not sent to the carrier'
      example:
        category: 'frozen'

    Bulky:
      type: object
      properties:
        incoterm:
          type: object
          properties:
            code:
              type: string
              description: Incoterm code
              example: 'DAP'
            location:
              type: string
              description: Incoterm Location
              example: 'Warehouse 2'
            zipCode:
              type: string
              description: Incoterm zipCode
              example: '08005'
        containerNumber:
          type: string
          description: Number or identifier of the container
          example: '1230B'
      description: 'Parameters for bulky type shipments'
      example:
        incoterm:
          code: 'DAP'
          location: 'Warehouse 2'
          zipCode: '08005'
        containerNumber: '1230B'

    CarrierDocumentationErrorProperties:
      type: object
      properties:
        error:
          required:
            - code
            - message
          type: object
          properties:
            code:
              type: string
              example: 'CE0130'
            message:
              type: string
              description: Error info
              example: 'The carrier token credential is invalid'
            carrierCode:
              type: string
              description: Error code coming from the carrier
              example: 'AUTHERR1'
            carrierMessage:
              type: string
              description: Error info coming from the carrier
              example: 'The token is invalid'

    MissingOrInvalidFieldsProperties:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              example: 'VE0900'
            message:
              type: string
              description: Error info
              example: 'X required field is missing | Format of field X is invalid'

    ########################
    # ATOMS
    ########################
    CreatedAtDate:
      allOf:
        - $ref: '#/components/schemas/Date'
        - nullable: false
        - description: Date and time when the expedition was entered into Deliverea's systems
    ShippingDate:
      allOf:
        - $ref: '#/components/schemas/Date'
        - nullable: false
        - description: Date when the expedition is to be shipped
        - nullable: false
      type: string
      nullable: false
      description: Date of the  (format YYYY-MM-DD)
    DeliveryDate:
      allOf:
        - $ref: '#/components/schemas/Date'
        - nullable: true
        - description: Date in which shipment was delivered


    TotalAmount:
      type: string
      example: "50.2 EUR"
      format: 'Amount with up-to 3 digits after decimal separator + ISO 4217 currency code'
      description: Total amount or price of the expedition articles (required for crossborder internationa expeditions if no amount by parcel[items] is present)
      nullable: true

    Status:
      type: string
      description: Expedition status
      enum:
        [
          'draft',
          'active',
          'finalized',
          'error',
          'cancelled',
          'hidden',
          'expired',
          'finalized',
          'closed',
        ]
      example:
        active

    OrderStatus:
      type: string
      enum: [
        'pending_draft',
        'error_drafting',
        'draft',
        'pending',
        # 'documented',
        'error_documented',
        # 'canceled',
      ]
      example:
        'pending'

    TrackingCodes:
      type: string
      enum: [
        '01',
        '02',
        '03',
        '04',
        '05',
        '06',
        '07',
        '08',
        '09',
        '10',
        '11',
        '12',
        '13',
        '14',
        '15',
        '16',
        '17',
        '18',
        '19',
        '20',
        '21',
        '22',
        '23',
        '24',
        '25',
        '26',
        '27',
        '28',
        '29',
        '30',
        '31',
        '32',
        '35',
        '36',
        '37',
        '38',
        '39',
        '40',
        '99',
      ]
      example:
        '11'

    Price:
      type: string
      nullable: false
      example: "50.2 EUR"
      format: 'Amount with up-to 3 digits after decimal separator + ISO 4217 currency code'

    HourRange:
      type: object
      properties:
        start:
          type: string
          nullable: false
          format: 'ISO-8601 (YYYY-MM-DDThh:mm:ssZ)'
          example: '2021-01-03T10:00:54+0100'
        end:
          type: string
          nullable: false
          format: 'ISO-8601 (YYYY-MM-DDThh:mm:ssZ)'
          example: '2021-01-03T13:00:54+0100'
      example:
        - hourStart: '2021-01-03T10:00:54+0100'
        - hourEnd: '2021-01-03T13:00:54+0100'

    ExpeditionDetailsLabel:
      type: object
      properties:
        type:
          type: string
          enum: [pdf, zpl]
          example: 'pdf'
        source:
          type: string
          enum: [carrier,label-engine]
          example: 'carrier'

    Date:
      type: string
      format: 'ISO-8601 (YYYY-MM-DDThh:mm:ssZ)'
      example: '2021-01-03T13:00:54+0100'

    Uuid:
      type: string
      format: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
      example: '966e22ec-6cfa-11ea-bae6-026b033c7ea0'

    ReturnsWebPortalConfiguration:
      type: object
      properties:
        active:
          type: boolean
          nullable: false
          description: 'Active or not'
          example: true
        subdomain:
          type: string
          nullable: true
          description: 'Returns webportal subdomain (https://mysubdomain.returnorder.io)'
          example: 'mysubdomain'
        color:
          type: string
          nullable: true
          description: 'Hexadecimal code color'
          example: '#D62424'
        senderId:
          type: string
          description: 'Sender email identifier that will be the sender of the advanced tracking communications'
          example: '49030f12-79e6-4e1f-9e3d-b3f6774d742b'
        notificationEmail:
          type: string
          format: email
          nullable: true
          description: Email that will be CC'd when a return es created
          example: support@mydomain.com
        notificationOn:
          type: boolean
          nullable: false
          description: Activate/deactivate CC'ing the notification email
          example: true
        policyDays:
          type: number
          nullable: false
          default: 15
          description: Peiod in days when the client will be able to demand a return
          example: 15
        policyUrl:
          type: string
          nullable: true
          format: url
          description: Link to return policies information
          example: https://mydomain.com/return-policy
        exitLink:
          type: string
          nullable: true
          format: url
          description: Link where the customer will be redirected after the return demand is completed
          example: https://mydomain.com/exit-link

    Rule:
      allOf:
        - $ref: '#/components/schemas/RulesConfiguration'
        - type: object
          properties:
            id:
              type: string
              format: uuid

    RulesConfiguration:
      type: object
      properties:
        alias:
          type: string
          nullable: false
          description: 'Define an alias for the rule'
        conditions:
          type: object
          nullable: false
          properties:
            to:
              type: object
              nullable: true
              properties:
                country:
                  $ref: '#/components/schemas/ToCountryCondition'
                zipCode:
                  $ref: '#/components/schemas/ToPostalCodeCondition'
            from:
              type: object
              nullable: true
              properties:
                country:
                  $ref: '#/components/schemas/ToCountryCondition'
                zipCode:
                  $ref: '#/components/schemas/ToPostalCodeCondition'
            category:
              $ref: '#/components/schemas/CategoryCondition'
            expeditionType:
              $ref: '#/components/schemas/ExpeditionTypeCondition'
            sku:
              $ref: '#/components/schemas/SkuCondition'
            totalPrice:
              $ref: '#/components/schemas/TotalPriceCondition'
            weight:
              $ref: '#/components/schemas/WeightCondition'
            cashOnDelivery:
              $ref: '#/components/schemas/CashOnDeliveryCondition'
        actions:
          type: object
          nullable: false
          properties:
            assignation:
              $ref: '#/components/schemas/AssignationAction'
        enable:
          type: boolean
          nullable: false
          example: true
          description: 'The status of the new rule'
        priority:
          type: number
          nullable: false
          example: 1
          description: 'The priority of the new rule when compare with others rules'
        distributionCenterId:
          type: string
          description: UUID identifier of the dictribution center
          example: 966e4225-6cfa-11ea-bae6-026b033c7ea0
        module:
          type: string
          enum:
            - 'general'
            - 'returns'
          example: 'general'
          nullable: true
          description: 'Optional field by default general'
        pickupType:
          type: string
          enum:
            - 'pickup'
            - 'droppoint'
          nullable: true
          description: 'Define the type of pickup'
          example: 'pickup'

    RulesUpdateConfiguration:
      type: object
      properties:
        alias:
          type: string
          nullable: false
          description: 'Define an alias for the rule'
        conditions:
          type: object
          nullable: false
          properties:
            to:
              type: object
              nullable: true
              properties:
                country:
                  $ref: '#/components/schemas/ToCountryCondition'
                zipCode:
                  $ref: '#/components/schemas/ToPostalCodeCondition'
            from:
              type: object
              nullable: true
              properties:
                country:
                  $ref: '#/components/schemas/ToCountryCondition'
                zipCode:
                  $ref: '#/components/schemas/ToPostalCodeCondition'
            category:
              $ref: '#/components/schemas/CategoryCondition'
            expeditionType:
              $ref: '#/components/schemas/ExpeditionTypeCondition'
            sku:
              $ref: '#/components/schemas/SkuCondition'
            totalPrice:
              $ref: '#/components/schemas/TotalPriceCondition'
            weight:
              $ref: '#/components/schemas/WeightCondition'
            cashOnDelivery:
              $ref: '#/components/schemas/CashOnDeliveryCondition'
            pickupType:
              $ref: '#/components/schemas/PickupTypeCondition'
        actions:
          type: object
          nullable: false
          properties:
            assignation:
              $ref: '#/components/schemas/AssignationAction'
        enable:
          type: boolean
          nullable: false
          example: true
          description: 'The status of the new rule'
        priority:
          type: number
          nullable: false
          example: 1
          description: 'The priority of the new rule when compare with others rules'

    RulesMatch:
      type: object
      properties:
        to:
          type: object
          nullable: true
          properties:
            country:
              type: string
              description: 'The country code of the expedition'
              example: 'ES'
            zipCode:
              type: string
              description: 'The postal code of the expedition'
              example: '03510'
        category:
          type: string
          description: 'The category of the expeditions products'
          example: 'Electronics'
        distributionCenterId:
          type: string
          description: 'The ID of the selected distribution center'
          format: uuid
          example: '9be66fcc-593e-4a0c-b5b7-af086dd99506'
        expeditionType:
          type: string
          description: 'The type of the expedition'
          enum:
            - 'shipment'
            - 'return'
          example: 'return'
        cashOnDelivery:
          type: boolean
          description: 'If the order is paid by cash on delivery'
          example: false
        totalPrice:
          type: string
          description: 'The total price of the expedition in dot separated decimal'
          example: '10.93'
        weight:
          type: number
          description: 'The weight of the expedition'
          example: 100
        module:
          type: string
          enum:
            - 'general'
            - 'returns'
          example: 'general'
          nullable: true
          description: 'Optional field by default general'

    ##########################
    # ActionsRules
    ##########################
    AssignationAction:
      type: object
      properties:
        carrier:
          type: string
          example: 'dummy'
          description: 'The name of the carrier'
        ceco:
          type: string
          example: 'DEFAULT'
          description: 'The client account for the selected carrier'
        service:
          type: string
          example: 'same-day'
          description: 'The service of the selected carrier'

    ##########################
    # ConditionsRules
    ##########################
    ToCountryCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
            - 'in'
        value:
          type: string
          description: 'The code of the country'
          example: "ES"

    ToPostalCodeCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
            - 'in'
            - 'starts_with'
        value:
          type: string
          description: 'The postal code'
          example: "08029"

    CategoryCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
            - 'in'
        value:
          type: string
          description: 'The category name'
          example: 'Electronics'

    ExpeditionTypeCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
            - 'in'
        value:
          type: string
          description: 'The type of the expedition'
          enum:
            - 'shipment'
            - 'return'

    SkuCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
            - 'in'
            - 'starts_with'
            - 'ends_with'
            - 'contains'
        value:
          type: string
          description: 'The SKU of product'

    TotalPriceCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equal_to'
            - 'greater_than'
            - 'greater_than_equal_to'
            - 'less_than'
            - 'less_than_equal_to'
            - 'between'
        value:
          type: number
          description: 'The price of the send'
          example: 10.20

    WeightCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equal_to'
            - 'greater_than'
            - 'greater_than_equal_to'
            - 'less_than'
            - 'less_than_equal_to'
            - 'between'
        value:
          type: number
          description: 'The weight in KG'
          example: 25

    CashOnDeliveryCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
        value:
          type: string
          description: 'A boolean condition for represent if the shipping is cash on delivery'
          enum:
            - 'true'
            - 'false'

    PickupTypeCondition:
      type: object
      nullable: true
      properties:
        type:
          type: string
          description: 'The comparator for evaluate the condition'
          enum:
            - 'equals'
            - 'not_equals'
        value:
          type: string
          description: 'The type of the pickup'
          enum:
            - 'pickup'
            - 'droppoint'


    TrackingsWebhookConfiguration:
      type: object
      properties:
        active:
          type: boolean
          nullable: false
          description: 'Active or not'
          example: true
        credentials:
          type: object
          properties:
            user:
              type: string
              nullable: false
              description: Basic auth username of the webhook provided
              example: 'username'
            password:
              type: string
              nullable: false
              description: Basic auth password of the webhook provided
              example: 'password'
        url:
          type: string
          nullable: false
          format: url
          description: Endpoint the tracking updates will be posted to
          example: https://mydomain.com/my-trackings-webhook

    Match:
      type: string
      description: Wheter the match found is "exact" (coincidence found with 100% confidence), "bestEffort" (coincidence found with high confidence) or "none" (no coincidence found)
      enum: [
        'exact',
        'bestEffort',
        'none',
      ]
      example:
        'exact'
